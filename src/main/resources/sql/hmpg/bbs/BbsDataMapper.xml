<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.church.hmpg.bbs.mappers.BbsDataMapper">

    <resultMap id="bbsDataVo" type="com.church.hmpg.bbs.vo.BbsDataVo"/>

    <sql id="selectSearchWhere">

    </sql>

    <!--  페이지 목록 -->
    <select id="selectList" resultMap="bbsDataVo">

        SELECT  data_sid
               ,board_sid /* 게시판 일련번호 */
               ,board_id
               ,user_id
               ,user_pw
               ,user_nick
               ,user_email
               ,data_title
               ,data_notice
               ,data_secret
               ,del_status
               ,view_count
               ,modify_date
               ,register_date
               ,category_code1 /* 카테고리1차 */
               ,category_code2 /* 카테고리2차 */
               ,category_code3 /* 카테고리3차 */
        FROM   LR_COMTNBBSDATA

        <include refid="selectSearchWhere"/>

        ORDER  BY data_sid DESC
        <![CDATA[ LIMIT  #{firstIndex}, #{recordCountPerPage}]]>
    </select>

    <!--  전체 행 수 -->
    <select id="selectTotalCount" resultType="int">
        SELECT COUNT(data_sid)
        FROM   LR_COMTNBBSDATA

        <include refid="selectSearchWhere"/>
    </select>

    <!--  보기 -->
    <select id="select" resultType="bbsDataVo">
        SELECT   data_sid
                ,board_sid         /* 게시판 일련번호 */
                ,board_id
                ,user_id
                ,user_pw
                ,user_nick
                ,user_email
                ,data_title
                ,data_notice
                ,data_secret
                ,del_status
                ,view_count
                ,modify_date
                ,register_date
                ,category_code1    /* 카테고리1차 */
                ,category_code2    /* 카테고리2차 */
                ,category_code3    /* 카테고리3차 */
        FROM    LR_COMTNBBSDATA
        WHERE   data_sid        = #{dataSid}
    </select>

    <!--  입력 -->
    <insert id="insert">
        INSERT INTO LR_COMTNBBSDATA (
         board_sid         /* 게시판 일련번호 */
        ,board_id
        ,user_id
        ,user_pw
        ,user_nick
        ,user_email
        ,data_title
        ,data_notice
        ,data_secret
        ,del_status
        ,view_count
        ,modify_date
        ,register_date
        ,category_code1    /* 카테고리1차 */
        ,category_code2    /* 카테고리2차 */
        ,category_code3    /* 카테고리3차 */
        ) VALUES (
        ,#{boardSid}
        ,#{boardId}
        ,#{userId}
        ,#{userPw}
        ,#{userNick}
        ,#{userEmail}
        ,#{dataTitle}
        ,#{dataNotice}
        ,#{dataSecret}
        ,#{delStatus}
        ,#{viewCount}
        ,#{modifyDate}
        ,#{registerDate}
        ,#{categoryCode1}
        ,#{categoryCode2}
        ,#{categoryCode3}
        )
    </insert>

    <!--  수정 -->
    <update id="update">
        UPDATE  LR_COMTNBBSDATA
        SET      board_sid      = #{boardSid}               /* 게시판 일련번호 */
                ,board_id       = #{boardId}
                ,user_id        = #{userId}
                ,user_pw        = #{userPw}
                ,user_nick      = #{userNick}
                ,user_email     = #{userEmail}
                ,data_title     = #{dataTitle}
                ,data_notice    = #{dataNotice}
                ,data_secret    = #{dataSecret}
                ,del_status     = #{delStatus}
                ,view_count     = #{viewCount}
                ,modify_date    = #{modifyDate}
                ,register_date  = #{registerDate}
                ,category_code1 = #{categoryCode1}          /* 카테고리1차 */
                ,category_code2 = #{categoryCode2}          /* 카테고리2차 */
                ,category_code3 = #{categoryCode3}          /* 카테고리3차 */
        WHERE   data_sid        = #{dataSid}
    </update>

    <!--  삭제 -->
    <delete id="delete">
        DELETE
        FROM   LR_COMTNBBSDATA
        WHERE  data_sid        = #{dataSid}
    </delete>
</mapper>


